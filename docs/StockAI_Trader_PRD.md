# AI股票助手（StockAI Trader）产品设计文档

## 一、产品定位
面向普通股票交易者的智能分析与决策辅助工具，旨在在 **1 分钟** 内输出清晰、可操作的股票交易建议（买入、卖出或观望），并提供明确的理由、区间、风险提示以及学习解释。

## 二、核心价值主张
- **聚合信息**：自动整合行情、指标、舆情与事件，一屏展示要点。
- **简洁易懂**：用自然语言总结技术+资金+消息+宏观逻辑，避免复杂研报。
- **快速反馈**：一分钟输出完整分析结论，适合日常交易节奏。
- **机会筛选**：在自选股中自动识别潜在操作机会。
- **帮助学习**：解释 AI 决策理由，帮助用户提升判断力。

## 三、目标用户画像
| 用户类型 | 典型特征 | 核心诉求 |
| --- | --- | --- |
| **普通投资者** | 有一定炒股经验，通过券商App或自选股看盘 | 快速判断个股是否值得买 |
| **短线交易者** | 高频操作，关注技术面与资金流 | 获得当日强势机会与风险警示 |
| **价值投资者** | 偏中长线，看基本面与事件驱动 | 了解宏观、行业与财报逻辑 |
| **学习型用户** | 希望提升自己的判断能力 | 需要AI提供清晰的逻辑与解释 |

## 四、核心功能模块
- **智能分析引擎**：多维度快速分析单只股票，包括技术面、资金面、基本面和事件面。
- **买卖区间生成**：基于技术指标和支撑/压力位给出推荐买入/卖出区间。
- **宏观/板块分析**：总结当日市场情绪、板块强弱以及宏观方向。
- **理由解释模块**：生成决策背后的逻辑说明，便于学习与复盘。
- **自选股日报**：每日扫描用户自选股，输出强弱评级与信号。
- **信号提醒推送**：在关键短线信号触发时推送提醒。
- **机会扫描器**：识别自选股中的做多/做空机会。
- **复盘与学习模式**：解释每一步逻辑，帮助用户复盘和学习。

## 五、系统架构设计
系统分为三个主要层次：数据层、分析层和应用层。

```
数据层（DataHub） ---> 分析层（AI Engine） ---> 应用层（App/UI）
```

### 1. 数据层（DataHub）
- **市场快照**：保存指数、板块、涨跌家数等日度宏观数据。
- **行情与指标**：保存股票 K 线和本地计算的技术指标。
- **资金与成交数据**：记录主力资金流向、成交量等。
- **新闻与事件摘要**：抓取新闻并做摘要和情绪评分。
- **缓存与TTL**：使用本地存储（如 SQLite/Parquet）控制缓存的有效期。

### 2. 分析层（AI Engine）
- **技术分析器**：计算 RSI、MACD、KDJ 等技术指标并判断短线信号。
- **资金面分析器**：分析主力资金流入流出以及量价关系。
- **事件/消息分析器**：识别公司新闻、财报及宏观事件。
- **宏观情绪分析器**：根据指数、行业数据判断市场氛围。
- **规则引擎**：根据上述特征打分并生成操作建议。
- **LLM 报告生成器**：将结构化分析结果转化为自然语言报告。

### 3. 应用层（App/UI）
- **自选股管理**：添加、删除或查看用户自选股票列表。
- **即时分析**：用户请求时生成单股分析报告。
- **每日报告**：批量分析自选股并生成综合性报告。
- **信号提醒推送**：在短线信号出现时向用户推送通知。
- **深度研究模式**：提供连接到多智能体分析框架（如 TradingAgents）的选项。

## 六、工作流程
1. **每日数据更新**：系统在凌晨或开盘前抓取并缓存市场数据、股票行情、资金流和新闻摘要。
2. **用户请求分析**：用户输入股票代码后，从缓存中提取数据，通过规则引擎生成特征，再由 LLM 生成报告。
3. **输出分析报告**：报告包含操作建议、买卖区间、理由、风险提示和趋势说明。
4. **机会扫描器**：批量分析自选股，筛选潜在做多或做空机会。
5. **信号推送**：当技术指标触发阈值时，推送短线信号提醒。

## 七、功能模块图
```
智能分析引擎 | 买卖区间生成 | 宏观/板块分析 | 理由解释模块
自选股日报   | 信号提醒推送 | 机会扫描器   | 复盘与学习模式
```

## 八、版本规划（Roadmap）
- **v1.0 MVP**：实现快速单股分析及报告生成。
- **v1.1**：支持自选股批量分析和每日自动报告。
- **v1.2**：加入宏观板块分析和机会扫描器。
- **v1.3**：开发信号提醒推送与复盘学习模式。
- **v2.0**：接入 TradingAgents 等多智能体深度分析模式，可选深入研究功能。

## 九、技术栈与实现要点
- **数据抓取**：使用 AKShare、yfinance 等 API 抓取行情数据；自建新闻抓取任务做摘要。
- **指标计算**：采用 pandas_ta 或 ta-lib 在本地计算技术指标。
- **缓存存储**：使用 SQLite 或 Parquet 文件保存数据，控制缓存失效时间。
- **规则引擎**：固定逻辑判断超买、超卖、资金流等，输出结构化操作建议。
- **LLM**：用于生成自然语言报告；LLM 不直接负责分析，而是润色与解释。
- **界面呈现**：可集成到 Web 前端、移动 App 或 CLI，通过卡片形式展示结果。

## 十、关键成功指标（KPIs）
- **分析响应时间**：≤ 60 秒
- **数据更新延迟**：≤ 10 分钟
- **分析方向准确率**：≥ 70%
- **用户留存率**：≥ 40%（按月）
- **每日报告成功率**：≥ 99%

## 十一、未来扩展方向
- **多市场支持**：扩展至 A 股、港股等市场。
- **实时语音问答**：支持用户与 AI 进行语音交互。
- **策略学习模式**：总结历史成功和失败案例，供用户参考。
- **个性化推荐**：根据用户交易风格调整分析算法。
- **插件模式**：集成到券商 App、TradingView 或 Telegram Bot。

---

> **一句话总结**：StockAI Trader 让普通投资者在 1 分钟内读懂股市，并做出更好的交易决策。
